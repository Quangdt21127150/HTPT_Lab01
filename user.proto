syntax = "proto3";

package user;

option go_package = "./user";

message User {
  string CreatedAt = 1;
  string UUID      = 2;
  string Email     = 3;
  string Password  = 4;
  string Image     = 5;
  int32  ID        = 6;
  bool   IsAdmin   = 7;
}

message UserDTO {
  string CreatedAt = 1;
  string UUID      = 2;
  string Email     = 3;
  string Password  = 4;
  string Image     = 5;
  bool   IsAdmin   = 6;
}

message EmptyRequest {}

message IDRequest {
  int32 ID = 1;
  string RequestID = 2;
  bool   IsReplicate = 3;
}

message GetAllRequest {
  int32 offset = 1;
  int32 limit  = 2;
}

message GetAllResponse {
  repeated User users  = 1;
  int32         total  = 2;
  int32         offset = 3;
  int32         limit  = 4;
}

message SetRequest {
  int32 ID = 1;
  UserDTO data = 2;
  string RequestId = 3;
  bool   IsReplicate = 4;
}

message CountResponse {
  int32 count = 1;
}

message SuccessResponse {
  bool success = 1;
}

message ServerID {
  int32 ServerID = 1;
}

service UserService {
  rpc Get(IDRequest) returns (User);
  rpc GetAll(GetAllRequest) returns (GetAllResponse);
  rpc Count(EmptyRequest) returns (CountResponse);
  rpc Insert(SetRequest) returns (SuccessResponse);
  rpc Set(SetRequest) returns (SuccessResponse);
  rpc Delete(IDRequest) returns (SuccessResponse);
}

service ElectionService {
  rpc SendElection(ServerID) returns (SuccessResponse);
  rpc SendCoordinator(ServerID) returns (SuccessResponse);
  rpc GetLeader(EmptyRequest) returns (ServerID);
  rpc Ping(EmptyRequest) returns (SuccessResponse);
}